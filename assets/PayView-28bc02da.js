import{S as d,T as w}from"./swalToast-e6d86b0f.js";import{N as P}from"./NavBar-2a417c1b.js";import{F as k}from"./FrontFooter-82d3ede4.js";import{_ as N,r as m,o as n,c as r,b as _,a as s,d as l,t as e,w as f,F as b,j as B,h as y,bu as V,bj as j,k as x}from"./index-4bf91984.js";const{VITE_APP_URL:T,VITE_APP_PATH:v}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_APP_PATH:"cheryl-hexschool",BASE_URL:"/vite-template/",MODE:"production",DEV:!1,PROD:!0},E={data(){return{order:{},orderId:"",user:{},payProducts:[],originTotal:0,payMethod:"請選擇"}},methods:{getOrder(){const{orderId:o}=this.$route.params;this.$http.get(`${T}api/${v}/order/${o}`).then(i=>{var p,t;this.order=i.data.order,this.orderId=i.data.order.id,this.user=i.data.order.user;const h=i.data.order.products;if(this.payProducts=Object.keys(h).map(function(a){return h[a]}),((t=(p=this.payProducts[0])==null?void 0:p.coupon)==null?void 0:t.percent)!==void 0){const a=this.payProducts[0].coupon.percent;this.originTotal=parseInt(this.order.total/a*100)}}).catch(i=>{d.fire({icon:"error",title:i.response.data.message,confirmButtonColor:"#ab7e52"})})},payConfirm(){this.order.is_paid?d.fire({icon:"warning",title:"您已付款完成",confirmButtonColor:"#ab7e52"}):this.payMethod!=="請選擇"?this.$http.post(`${T}api/${v}/pay/${this.orderId}`).then(o=>{w.fire({icon:"success",title:o.data.message}),this.getOrder()}).catch(o=>{d.fire({icon:"error",title:o.response.data.message,confirmButtonColor:"#ab7e52"})}):d.fire({icon:"warning",title:"請先選擇付款方式",confirmButtonColor:"#ab7e52"})}},components:{NavBar:P,FrontFooter:k},mounted(){this.getOrder()}},I={class:"",style:{"padding-top":"90px","padding-bottom":"6vh","min-height":"95vh"}},M=s("div",{class:"position-relative d-flex align-items-center justify-content-center",style:{"min-height":"180px"}},[s("div",{class:"position-absolute",style:{top:"0",bottom:"0",left:"0",right:"0","background-image":"url(https://images.unsplash.com/photo-1550450339-e7a4787a2074?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1920&q=80)","background-position":"center center",opacity:"1"}})],-1),A={key:0,class:"container",style:{height:"52vh"}},F={class:"row justify-content-center px-4 mx-lg-5 mt-lg-5 d-flex flex-column"},D=s("h1",{class:"text-center Serif-TC letter-spacing m-0 py-5 neutral-900"},[s("i",{class:"bi bi-check2-circle text-success"}),l(" 付款成功，訂單已成立!")],-1),L={class:"text-center Sans-TC fs-3 neutral-700"},O={class:"accent-color"},H=s("p",{class:"text-center Sans-TC fs-3 neutral-700"},[s("i",{class:"bi bi-stars pe-2"}),l("感謝您的訂購！非常感激您對我們產品的信任和支持。")],-1),U=s("p",{class:"text-center Sans-TC fs-3 neutral-700"},"您的滿意是我們最大的追求，期待為您提供更優質的服務。",-1),$={class:"row col-md-6 justify-content-between m-0 px-0 flex-grow-1",style:{"padding-top":"4vh"}},R={key:1,class:"container"},q=x('<div class="row justify-content-between px-4 pt-5 mx-lg-5"><h1 class="text-center Serif-TC letter-spacing m-0 accent-color"><i class="bi bi-exclamation-circle"></i> 提醒您!訂單尚未完成</h1><p class="text-center Sans-TC letter-spacing m-0 pt-3 fs-4">請於下方選譯付款方式後，按下<span class="text-primary fw-bolder">確認付款</span>，即可完成訂購!</p></div>',1),G={class:"row justify-content-center pt-5 px-4 mx-lg-5"},z={class:"col-md-6 bg-all"},W=s("h2",{class:"text-center Serif-TC my-4"},"訂單明細",-1),Y={class:"pe-2",style:{"max-height":"84vh","overflow-x":"hidden"}},J=["src","alt"],K={class:"w-100 p-3 position-relative Sans-TC"},Q={class:"mb-0 fw-bold"},X={class:"mb-0 mt-1 neutral-500",style:{"font-size":"14px"}},Z=s("small",null,"售價：",-1),ss={class:"d-flex justify-content-between mt-1"},ts={class:"mb-0"},es={class:"mb-0"},os={class:"px-3"},is={class:"table mt-4 neutral-500 Sans-TC"},cs=s("th",{scope:"row",class:"border-0 px-0 font-weight-normal"},"小計",-1),ns={key:0,class:"text-end border-0 px-0"},rs={key:1,class:"text-end border-0 px-0"},as={key:0},ls=s("th",{scope:"row",class:"border-0 px-0 pt-0 font-weight-normal"},"折扣金額",-1),ds={class:"text-end accent-color border-0 px-0 pt-0"},_s={class:"d-flex justify-content-between mt-4 mb-4 Sans-TC"},hs=s("p",{class:"mb-0 h4 fw-bold"},"總計",-1),ps={class:"mb-0 h4 fw-bold"},ms={class:"col-12 col-md-6 bg-sec"},us=s("h2",{class:"text-center Serif-TC my-4"},"客戶資訊",-1),fs={class:"pb-3"},bs={class:"px-3 m-auto"},ys={class:"mb-3"},Ts=s("p",{class:"Serif-TC mb-1"},"Email：",-1),vs={class:"Sans-TC"},xs={class:"mb-3"},gs=s("p",{class:"Serif-TC mb-1"},"收件人姓名：",-1),Cs={class:"Sans-TC"},Ss={class:"mb-3"},ws=s("p",{class:"Serif-TC mb-1"},"收件人電話：",-1),Ps={class:"Sans-TC"},ks={class:"mb-3"},Ns=s("p",{class:"Serif-TC mb-1"},"收件人地址：",-1),Bs={class:"Sans-TC"},Vs=s("h2",{class:"text-center Serif-TC my-4"},"訂單資訊",-1),js={class:"pb-3"},Es={class:"px-3 m-auto"},Is={class:"mb-3"},Ms=s("p",{class:"Serif-TC mb-1"},"訂單日期：",-1),As={class:"Sans-TC"},Fs={class:"mb-3"},Ds=s("p",{class:"Serif-TC mb-1"},"訂單編號：",-1),Ls={class:"Sans-TC"},Os={class:"mb-3"},Hs=s("p",{class:"Serif-TC mb-1"},"訂單金額：",-1),Us={class:"Sans-TC"},$s={class:"mb-3"},Rs=s("p",{class:"Serif-TC mb-1"},"付款狀態：",-1),qs={key:0,class:"Sans-TC text-success fs-5 m-0"},Gs={key:1,class:"Sans-TC accent-color fs-5 m-0"},zs={class:"mb-3"},Ws=s("p",{class:"Serif-TC mb-1"},"付款方式：",-1),Ys={class:"col col-12"},Js=x('<option selected disabled>請選擇</option><option value="貨到付款">貨到付款</option><option value="銀行轉帳/ATM">銀行轉帳/ATM</option><option value="信用卡">信用卡</option><option value="LINE_Pay">LINE Pay</option>',5),Ks=[Js],Qs={key:0,class:"mb-3"},Xs=s("p",{class:"Serif-TC mb-1"},"訂單備註：",-1),Zs={class:"Sans-TC"},st={class:"mb-3"};function tt(o,i,h,p,t,a){const g=m("NavBar"),u=m("router-link"),C=m("FrontFooter");return n(),r(b,null,[_(g),s("div",I,[M,t.order.is_paid?(n(),r("div",A,[s("div",F,[D,s("p",L,[l("訂單編號："),s("span",O,e(t.order.id),1)]),H,U,s("div",$,[_(u,{to:"/products",class:"btn btn-outline-n500 Serif-TC col-5 col-md-auto"},{default:f(()=>[l("繼續購物")]),_:1}),_(u,{to:"/",class:"btn btn-custom Serif-TC col-5 col-md-auto text-decoration-none",style:{"padding-left":"1.5rem"}},{default:f(()=>[l("回到首頁")]),_:1})])])])):(n(),r("div",R,[q,s("div",G,[s("div",z,[W,s("div",Y,[(n(!0),r(b,null,B(t.order.products,(c,S)=>(n(),r("div",{class:"d-flex mt-4 bg-white",key:S},[s("img",{class:"object-cover",src:c.product.imageUrl,alt:c.product.title,style:{width:"120px",height:"120px"}},null,8,J),s("div",K,[s("p",Q,e(c.product.title),1),s("p",X,[Z,l(e(o.$filters.currency(c.product.price))+" /"+e(c.product.unit),1)]),s("div",ss,[s("p",ts," 數量："+e(c.qty),1),s("p",es,"NT$ "+e(o.$filters.currency(c.total)),1)])])]))),128))]),s("div",os,[s("table",is,[s("tbody",null,[s("tr",null,[cs,t.originTotal!==0?(n(),r("td",ns,"NT$ "+e(o.$filters.currency(t.originTotal)),1)):(n(),r("td",rs,"NT$ "+e(o.$filters.currency(t.order.total)),1))]),t.originTotal!==0?(n(),r("tr",as,[ls,s("td",ds,e(t.order.total-t.originTotal),1)])):y("",!0)])]),s("div",_s,[hs,s("p",ps,"NT$ "+e(o.$filters.currency(t.order.total)),1)])])]),s("div",ms,[us,s("div",fs,[s("div",bs,[s("div",ys,[Ts,s("p",vs,e(this.user.email),1)]),s("div",xs,[gs,s("p",Cs,e(this.user.name),1)]),s("div",Ss,[ws,s("p",Ps,e(this.user.tel),1)]),s("div",ks,[Ns,s("p",Bs,e(this.user.address),1)])])]),Vs,s("div",js,[s("div",Es,[s("div",Is,[Ms,s("p",As,e(o.$filters.date(t.order.create_at)),1)]),s("div",Fs,[Ds,s("p",Ls,e(t.order.id),1)]),s("div",Os,[Hs,s("p",Us,"NT$ "+e(o.$filters.currency(t.order.total)),1)]),s("div",$s,[Rs,t.order.is_paid?(n(),r("p",qs,"付款完成")):(n(),r("p",Gs,"尚未付款"))]),s("div",zs,[Ws,s("form",Ys,[V(s("select",{name:"",id:"",class:"form-select Sans-TC","onUpdate:modelValue":i[0]||(i[0]=c=>t.payMethod=c),style:{"border-radius":"0"}},Ks,512),[[j,t.payMethod]])])]),t.order.message?(n(),r("div",Qs,[Xs,s("p",Zs,e(t.order.message),1)])):y("",!0),s("div",st,[s("button",{type:"button",class:"btn btn-custom Sans-TC w-100",style:{"padding-left":"1.5rem"},onClick:i[1]||(i[1]=(...c)=>a.payConfirm&&a.payConfirm(...c))},"確認付款")])])])])])]))]),_(C)],64)}const nt=N(E,[["render",tt]]);export{nt as default};
