import{S as _,T as y}from"./swalToast-f80a10dc.js";import{N as g}from"./NavBar-17fdffac.js";import{F as S}from"./FrontFooter-5501b438.js";import{_ as C,r as h,o as c,c as i,b as p,a as s,F as m,k as w,t,d as f,h as P}from"./index-3e6b66a8.js";const{VITE_APP_URL:u,VITE_APP_PATH:b}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_APP_PATH:"cheryl-hexschool",BASE_URL:"/vite-template/",MODE:"production",DEV:!1,PROD:!0},k={data(){return{order:{},orderId:"",user:{},payProducts:[],originTotal:0,payStatus:!1}},computed:{},methods:{getOrder(){const{orderId:a}=this.$route.params;this.$http.get(`${u}api/${b}/order/${a}`).then(e=>{var l,o;this.order=e.data.order,this.orderId=e.data.order.id,this.user=e.data.order.user;const d=e.data.order.products;if(this.payProducts=Object.keys(d).map(function(r){return d[r]}),((o=(l=this.payProducts[0])==null?void 0:l.coupon)==null?void 0:o.percent)!==void 0){const r=this.payProducts[0].coupon.percent;this.originTotal=this.order.total/r*100}}).catch(e=>{_.fire({icon:"error",title:e.response.data.message})})},payConfirm(){this.$http.get(`${u}api/${b}/pay/${this.orderId}`).then(a=>{y.fire({icon:"success",title:a.data.message}),this.payStatus=!0}).catch(a=>{_.fire({icon:"error",title:a.response.data.message})})}},components:{NavBar:g,FrontFooter:S},mounted(){this.getOrder()}},N={class:"",style:{"padding-top":"90px","padding-bottom":"6vh"}},E=s("div",{class:"position-relative d-flex align-items-center justify-content-center",style:{"min-height":"180px"}},[s("div",{class:"position-absolute",style:{top:"0",bottom:"0",left:"0",right:"0","background-image":"url(https://images.unsplash.com/photo-1550450339-e7a4787a2074?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1920&q=80)","background-position":"center center",opacity:"1"}})],-1),V={class:"container"},A=s("div",{class:"row justify-content-between px-4 pt-5 mx-lg-5"},[s("h1",{class:"text-center Serif-TC letter-spacing m-0"},[s("i",{class:"bi bi-check2-circle text-success"}),f(" 訂單已成立")])],-1),I={class:"row justify-content-center pt-5 px-4 mx-lg-5"},B={class:"col-md-6 bg-all"},F=s("h2",{class:"text-center Serif-TC my-4"},"訂單明細",-1),j={class:"pe-2",style:{"max-height":"60vh","overflow-x":"hidden"}},D=["src"],L={class:"w-100 p-3 position-relative Sans-TC"},M={class:"mb-0 fw-bold"},H={class:"mb-0 mt-1 neutral-500",style:{"font-size":"14px"}},O=s("small",null,"售價：",-1),R={class:"d-flex justify-content-between mt-1"},U={class:"mb-0"},$={class:"mb-0"},q={class:"px-3"},G={class:"table mt-4 neutral-500 Sans-TC"},z=s("th",{scope:"row",class:"border-0 px-0 font-weight-normal"},"小計",-1),W={key:0,class:"text-end border-0 px-0"},Y={key:1,class:"text-end border-0 px-0"},J=s("th",{scope:"row",class:"border-0 px-0 pt-0 font-weight-normal"},"折扣金額",-1),K={key:0,class:"text-end accent-color border-0 px-0 pt-0"},Q={key:1,class:"text-end accent-color border-0 px-0 pt-0"},X={class:"d-flex justify-content-between mt-4 mb-4 Sans-TC"},Z=s("p",{class:"mb-0 h4 fw-bold"},"總計",-1),ss={class:"mb-0 h4 fw-bold"},ts={class:"col-12 col-md-6 bg-sec"},os=s("h2",{class:"text-center Serif-TC my-4"},"訂單資訊",-1),es={class:"pb-3"},cs={class:"px-3 m-auto"},is={class:"mb-3"},ns=s("p",{class:"Serif-TC mb-1"},"訂單日期：",-1),as={class:"Sans-TC"},rs={class:"mb-3"},ds=s("p",{class:"Serif-TC mb-1"},"訂單編號：",-1),ls={class:"Sans-TC"},_s={class:"mb-3"},hs=s("p",{class:"Serif-TC mb-1"},"付款狀態：",-1),ps={class:"row"},ms={class:"col-auto"},us={key:0,class:"Sans-TC text-success fs-5 m-0"},bs={key:1,class:"Sans-TC accent-color fs-5 m-0"},fs=P('<form class="col"><select name="" id="" class="form-select" style="border-radius:0;"><option selected disabled>請選擇付款方式</option><option value="貨到付款">貨到付款</option><option value="銀行轉帳/ATM">銀行轉帳/ATM</option><option value="信用卡">信用卡</option><option value="LINE_Pay">LINE Pay</option></select></form>',1),Ts={class:"col-auto"},vs={class:"mb-3"},xs=s("p",{class:"Serif-TC mb-1"},"訂單金額：",-1),ys={class:"Sans-TC"},gs={class:"mb-3"},Ss=s("p",{class:"Serif-TC mb-1"},"訂單備註：",-1),Cs={class:"Sans-TC"},ws=s("h2",{class:"text-center Serif-TC my-4"},"客戶資訊",-1),Ps={class:"pb-3"},ks={class:"px-3 m-auto"},Ns={class:"mb-3"},Es=s("p",{class:"Serif-TC mb-1"},"Email：",-1),Vs={class:"Sans-TC"},As={class:"mb-3"},Is=s("p",{class:"Serif-TC mb-1"},"收件人姓名：",-1),Bs={class:"Sans-TC"},Fs={class:"mb-3"},js=s("p",{class:"Serif-TC mb-1"},"收件人電話：",-1),Ds={class:"Sans-TC"},Ls={class:"mb-3"},Ms=s("p",{class:"Serif-TC mb-1"},"收件人地址：",-1),Hs={class:"Sans-TC"};function Os(a,e,d,l,o,r){const T=h("NavBar"),v=h("FrontFooter");return c(),i(m,null,[p(T),s("div",N,[E,s("div",V,[A,s("div",I,[s("div",B,[F,s("div",j,[(c(!0),i(m,null,w(o.order.products,(n,x)=>(c(),i("div",{class:"d-flex mt-4 bg-white",key:x},[s("img",{class:"object-cover",src:n.product.imageUrl,alt:"",style:{width:"120px",height:"120px"}},null,8,D),s("div",L,[s("p",M,t(n.product.title),1),s("p",H,[O,f(t(n.product.price)+" /"+t(n.product.unit),1)]),s("div",R,[s("p",U," 數量："+t(n.qty),1),s("p",$,"NT$ "+t(n.total),1)])])]))),128))]),s("div",q,[s("table",G,[s("tbody",null,[s("tr",null,[z,o.originTotal!==0?(c(),i("td",W,"NT$ "+t(o.originTotal),1)):(c(),i("td",Y,"NT$ "+t(o.order.total),1))]),s("tr",null,[J,o.originTotal===0?(c(),i("td",K,"-0")):(c(),i("td",Q,"-"+t(o.order.total-o.originTotal),1))])])]),s("div",X,[Z,s("p",ss,"NT$ "+t(o.order.total),1)])])]),s("div",ts,[os,s("div",es,[s("div",cs,[s("div",is,[ns,s("p",as,t(a.$filters.date(o.order.create_at)),1)]),s("div",rs,[ds,s("p",ls,t(o.order.id),1)]),s("div",_s,[hs,s("div",null,[s("div",ps,[s("div",ms,[o.payStatus?(c(),i("p",us,"付款完成")):(c(),i("p",bs,"尚未付款"))]),fs,s("div",Ts,[s("button",{type:"button",class:"btn btn-sm btn-custom Sans-TC",style:{"padding-left":"1.5rem"},onClick:e[0]||(e[0]=(...n)=>r.payConfirm&&r.payConfirm(...n))},"確認付款")])])])]),s("div",vs,[xs,s("p",ys,"NT$ "+t(o.order.total),1)]),s("div",gs,[Ss,s("p",Cs,t(o.order.message),1)])])]),ws,s("div",Ps,[s("div",ks,[s("div",Ns,[Es,s("p",Vs,t(this.user.email),1)]),s("div",As,[Is,s("p",Bs,t(this.user.name),1)]),s("div",Fs,[js,s("p",Ds,t(this.user.tel),1)]),s("div",Ls,[Ms,s("p",Hs,t(this.user.address),1)])])])])])])]),p(v)],64)}const Gs=C(k,[["render",Os]]);export{Gs as default};
