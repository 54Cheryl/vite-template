import{S as d,T as x}from"./swalToast-9e83a96f.js";import{N as g}from"./NavBar-1f65fcdb.js";import{F as S}from"./FrontFooter-0e0f6505.js";import{_ as C,r as h,o as c,c as n,b as p,a as s,F as m,l as w,t as e,bu as P,bj as N,d as f,h as k}from"./index-c927615a.js";const{VITE_APP_URL:u,VITE_APP_PATH:b}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_APP_PATH:"cheryl-hexschool",BASE_URL:"/vite-template/",MODE:"production",DEV:!1,PROD:!0},V={data(){return{order:{},orderId:"",user:{},payProducts:[],originTotal:0,payMethod:"請選擇"}},computed:{},methods:{getOrder(){const{orderId:r}=this.$route.params;this.$http.get(`${u}api/${b}/order/${r}`).then(o=>{var _,t;this.order=o.data.order,this.orderId=o.data.order.id,this.user=o.data.order.user;const l=o.data.order.products;if(this.payProducts=Object.keys(l).map(function(a){return l[a]}),((t=(_=this.payProducts[0])==null?void 0:_.coupon)==null?void 0:t.percent)!==void 0){const a=this.payProducts[0].coupon.percent;this.originTotal=parseInt(this.order.total/a*100)}}).catch(o=>{d.fire({icon:"error",title:o.response.data.message})})},payConfirm(){this.order.is_paid?d.fire({icon:"warning",title:"您已付款完成"}):this.payMethod!=="請選擇"?this.$http.post(`${u}api/${b}/pay/${this.orderId}`).then(r=>{x.fire({icon:"success",title:r.data.message}),this.getOrder()}).catch(r=>{d.fire({icon:"error",title:r.response.data.message})}):d.fire({icon:"warning",title:"請先選擇付款方式"})}},components:{NavBar:g,FrontFooter:S},mounted(){this.getOrder()}},E={class:"",style:{"padding-top":"90px","padding-bottom":"6vh"}},I=s("div",{class:"position-relative d-flex align-items-center justify-content-center",style:{"min-height":"180px"}},[s("div",{class:"position-absolute",style:{top:"0",bottom:"0",left:"0",right:"0","background-image":"url(https://images.unsplash.com/photo-1550450339-e7a4787a2074?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1920&q=80)","background-position":"center center",opacity:"1"}})],-1),M={class:"container"},A=s("div",{class:"row justify-content-between px-4 pt-5 mx-lg-5"},[s("h1",{class:"text-center Serif-TC letter-spacing m-0"},[s("i",{class:"bi bi-check2-circle text-success"}),f(" 訂單已成立")])],-1),j={class:"row justify-content-center pt-5 px-4 mx-lg-5"},B={class:"col-md-6 bg-all"},F=s("h2",{class:"text-center Serif-TC my-4"},"訂單明細",-1),D={class:"pe-2",style:{"max-height":"60vh","overflow-x":"hidden"}},L=["src"],O={class:"w-100 p-3 position-relative Sans-TC"},H={class:"mb-0 fw-bold"},U={class:"mb-0 mt-1 neutral-500",style:{"font-size":"14px"}},R=s("small",null,"售價：",-1),q={class:"d-flex justify-content-between mt-1"},G={class:"mb-0"},$={class:"mb-0"},z={class:"px-3"},W={class:"table mt-4 neutral-500 Sans-TC"},Y=s("th",{scope:"row",class:"border-0 px-0 font-weight-normal"},"小計",-1),J={key:0,class:"text-end border-0 px-0"},K={key:1,class:"text-end border-0 px-0"},Q=s("th",{scope:"row",class:"border-0 px-0 pt-0 font-weight-normal"},"折扣金額",-1),X={key:0,class:"text-end accent-color border-0 px-0 pt-0"},Z={key:1,class:"text-end accent-color border-0 px-0 pt-0"},ss={class:"d-flex justify-content-between mt-4 mb-4 Sans-TC"},ts=s("p",{class:"mb-0 h4 fw-bold"},"總計",-1),es={class:"mb-0 h4 fw-bold"},os={class:"col-12 col-md-6 bg-sec"},is=s("h2",{class:"text-center Serif-TC my-4"},"訂單資訊",-1),cs={class:"pb-3"},ns={class:"px-3 m-auto"},rs={class:"mb-3"},as=s("p",{class:"Serif-TC mb-1"},"訂單日期：",-1),ds={class:"Sans-TC"},ls={class:"mb-3"},_s=s("p",{class:"Serif-TC mb-1"},"訂單編號：",-1),hs={class:"Sans-TC"},ps={class:"mb-3"},ms=s("p",{class:"Serif-TC mb-1"},"付款狀態：",-1),us={key:0,class:"Sans-TC text-success fs-5 m-0"},bs={key:1,class:"Sans-TC accent-color fs-5 m-0"},fs={class:"mb-3"},Ts=s("p",{class:"Serif-TC mb-1"},"付款方式：",-1),vs={class:"row"},ys={class:"col col-lg-5"},xs=k('<option selected disabled>請選擇</option><option value="貨到付款">貨到付款</option><option value="銀行轉帳/ATM">銀行轉帳/ATM</option><option value="信用卡">信用卡</option><option value="LINE_Pay">LINE Pay</option>',5),gs=[xs],Ss={class:"col-auto"},Cs={class:"mb-3"},ws=s("p",{class:"Serif-TC mb-1"},"訂單金額：",-1),Ps={class:"Sans-TC"},Ns={class:"mb-3"},ks=s("p",{class:"Serif-TC mb-1"},"訂單備註：",-1),Vs={class:"Sans-TC"},Es=s("h2",{class:"text-center Serif-TC my-4"},"客戶資訊",-1),Is={class:"pb-3"},Ms={class:"px-3 m-auto"},As={class:"mb-3"},js=s("p",{class:"Serif-TC mb-1"},"Email：",-1),Bs={class:"Sans-TC"},Fs={class:"mb-3"},Ds=s("p",{class:"Serif-TC mb-1"},"收件人姓名：",-1),Ls={class:"Sans-TC"},Os={class:"mb-3"},Hs=s("p",{class:"Serif-TC mb-1"},"收件人電話：",-1),Us={class:"Sans-TC"},Rs={class:"mb-3"},qs=s("p",{class:"Serif-TC mb-1"},"收件人地址：",-1),Gs={class:"Sans-TC"};function $s(r,o,l,_,t,a){const T=h("NavBar"),v=h("FrontFooter");return c(),n(m,null,[p(T),s("div",E,[I,s("div",M,[A,s("div",j,[s("div",B,[F,s("div",D,[(c(!0),n(m,null,w(t.order.products,(i,y)=>(c(),n("div",{class:"d-flex mt-4 bg-white",key:y},[s("img",{class:"object-cover",src:i.product.imageUrl,alt:"",style:{width:"120px",height:"120px"}},null,8,L),s("div",O,[s("p",H,e(i.product.title),1),s("p",U,[R,f(e(i.product.price)+" /"+e(i.product.unit),1)]),s("div",q,[s("p",G," 數量："+e(i.qty),1),s("p",$,"NT$ "+e(i.total),1)])])]))),128))]),s("div",z,[s("table",W,[s("tbody",null,[s("tr",null,[Y,t.originTotal!==0?(c(),n("td",J,"NT$ "+e(t.originTotal),1)):(c(),n("td",K,"NT$ "+e(t.order.total),1))]),s("tr",null,[Q,t.originTotal===0?(c(),n("td",X,"-0")):(c(),n("td",Z,e(t.order.total-t.originTotal),1))])])]),s("div",ss,[ts,s("p",es,"NT$ "+e(t.order.total),1)])])]),s("div",os,[is,s("div",cs,[s("div",ns,[s("div",rs,[as,s("p",ds,e(r.$filters.date(t.order.create_at)),1)]),s("div",ls,[_s,s("p",hs,e(t.order.id),1)]),s("div",ps,[ms,t.order.is_paid?(c(),n("p",us,"付款完成")):(c(),n("p",bs,"尚未付款"))]),s("div",fs,[Ts,s("div",vs,[s("form",ys,[P(s("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":o[0]||(o[0]=i=>t.payMethod=i),style:{"border-radius":"0"}},gs,512),[[N,t.payMethod]])]),s("div",Ss,[s("button",{type:"button",class:"btn btn-sm btn-custom Sans-TC",style:{"padding-left":"1.5rem"},onClick:o[1]||(o[1]=(...i)=>a.payConfirm&&a.payConfirm(...i))},"確認付款")])])]),s("div",Cs,[ws,s("p",Ps,"NT$ "+e(t.order.total),1)]),s("div",Ns,[ks,s("p",Vs,e(t.order.message),1)])])]),Es,s("div",Is,[s("div",Ms,[s("div",As,[js,s("p",Bs,e(this.user.email),1)]),s("div",Fs,[Ds,s("p",Ls,e(this.user.name),1)]),s("div",Os,[Hs,s("p",Us,e(this.user.tel),1)]),s("div",Rs,[qs,s("p",Gs,e(this.user.address),1)])])])])])])]),p(v)],64)}const Ks=C(V,[["render",$s]]);export{Ks as default};
