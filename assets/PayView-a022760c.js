import{S as d,T as C}from"./swalToast-1398ad26.js";import{N as S}from"./NavBar-0874b26b.js";import{F as w}from"./FrontFooter-c47e2ee1.js";import{_ as P,r as m,o as n,c as r,b as l,a as s,F as f,i as k,t as e,bu as N,bj as V,w as b,d as _,j}from"./index-42a445c1.js";const{VITE_APP_URL:y,VITE_APP_PATH:T}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_APP_PATH:"cheryl-hexschool",BASE_URL:"/vite-template/",MODE:"production",DEV:!1,PROD:!0},E={data(){return{order:{},orderId:"",user:{},payProducts:[],originTotal:0,payMethod:"請選擇"}},methods:{getOrder(){const{orderId:o}=this.$route.params;this.$http.get(`${y}api/${T}/order/${o}`).then(i=>{var h,t;this.order=i.data.order,this.orderId=i.data.order.id,this.user=i.data.order.user;const p=i.data.order.products;if(this.payProducts=Object.keys(p).map(function(a){return p[a]}),((t=(h=this.payProducts[0])==null?void 0:h.coupon)==null?void 0:t.percent)!==void 0){const a=this.payProducts[0].coupon.percent;this.originTotal=parseInt(this.order.total/a*100)}}).catch(i=>{d.fire({icon:"error",title:i.response.data.message})})},payConfirm(){this.order.is_paid?d.fire({icon:"warning",title:"您已付款完成"}):this.payMethod!=="請選擇"?this.$http.post(`${y}api/${T}/pay/${this.orderId}`).then(o=>{C.fire({icon:"success",title:o.data.message}),this.getOrder()}).catch(o=>{d.fire({icon:"error",title:o.response.data.message})}):d.fire({icon:"warning",title:"請先選擇付款方式"})}},components:{NavBar:S,FrontFooter:w},mounted(){this.getOrder()}},I={class:"",style:{"padding-top":"90px","padding-bottom":"6vh"}},M=s("div",{class:"position-relative d-flex align-items-center justify-content-center",style:{"min-height":"180px"}},[s("div",{class:"position-absolute",style:{top:"0",bottom:"0",left:"0",right:"0","background-image":"url(https://images.unsplash.com/photo-1550450339-e7a4787a2074?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1920&q=80)","background-position":"center center",opacity:"1"}})],-1),A={class:"container"},B=s("div",{class:"row justify-content-between px-4 pt-5 mx-lg-5"},[s("h1",{class:"text-center Serif-TC letter-spacing m-0"},[s("i",{class:"bi bi-check2-circle text-success"}),_(" 訂單已成立")])],-1),F={class:"row justify-content-center pt-5 px-4 mx-lg-5"},$={class:"col-md-6 bg-all"},D=s("h2",{class:"text-center Serif-TC my-4"},"訂單明細",-1),L={class:"pe-2",style:{"max-height":"60vh","overflow-x":"hidden"}},O=["src","alt"],H={class:"w-100 p-3 position-relative Sans-TC"},U={class:"mb-0 fw-bold"},R={class:"mb-0 mt-1 neutral-500",style:{"font-size":"14px"}},q=s("small",null,"售價：",-1),G={class:"d-flex justify-content-between mt-1"},z={class:"mb-0"},W={class:"mb-0"},Y={class:"px-3"},J={class:"table mt-4 neutral-500 Sans-TC"},K=s("th",{scope:"row",class:"border-0 px-0 font-weight-normal"},"小計",-1),Q={key:0,class:"text-end border-0 px-0"},X={key:1,class:"text-end border-0 px-0"},Z=s("th",{scope:"row",class:"border-0 px-0 pt-0 font-weight-normal"},"折扣金額",-1),ss={key:0,class:"text-end accent-color border-0 px-0 pt-0"},ts={key:1,class:"text-end accent-color border-0 px-0 pt-0"},es={class:"d-flex justify-content-between mt-4 mb-4 Sans-TC"},os=s("p",{class:"mb-0 h4 fw-bold"},"總計",-1),is={class:"mb-0 h4 fw-bold"},cs={class:"col-12 col-md-6 bg-sec"},ns=s("h2",{class:"text-center Serif-TC my-4"},"訂單資訊",-1),rs={class:"pb-3"},as={class:"px-3 m-auto"},ds={class:"mb-3"},ls=s("p",{class:"Serif-TC mb-1"},"訂單日期：",-1),_s={class:"Sans-TC"},ps={class:"mb-3"},hs=s("p",{class:"Serif-TC mb-1"},"訂單編號：",-1),ms={class:"Sans-TC"},us={class:"mb-3"},fs=s("p",{class:"Serif-TC mb-1"},"付款狀態：",-1),bs={key:0,class:"Sans-TC text-success fs-5 m-0"},ys={key:1,class:"Sans-TC accent-color fs-5 m-0"},Ts={class:"mb-3"},vs=s("p",{class:"Serif-TC mb-1"},"付款方式：",-1),gs={class:"row"},xs={class:"col col-lg-5"},Cs=j('<option selected disabled>請選擇</option><option value="貨到付款">貨到付款</option><option value="銀行轉帳/ATM">銀行轉帳/ATM</option><option value="信用卡">信用卡</option><option value="LINE_Pay">LINE Pay</option>',5),Ss=[Cs],ws={class:"col-auto"},Ps={class:"mb-3"},ks=s("p",{class:"Serif-TC mb-1"},"訂單金額：",-1),Ns={class:"Sans-TC"},Vs={class:"mb-3"},js=s("p",{class:"Serif-TC mb-1"},"訂單備註：",-1),Es={class:"Sans-TC"},Is=s("h2",{class:"text-center Serif-TC my-4"},"客戶資訊",-1),Ms={class:"pb-3"},As={class:"px-3 m-auto"},Bs={class:"mb-3"},Fs=s("p",{class:"Serif-TC mb-1"},"Email：",-1),$s={class:"Sans-TC"},Ds={class:"mb-3"},Ls=s("p",{class:"Serif-TC mb-1"},"收件人姓名：",-1),Os={class:"Sans-TC"},Hs={class:"mb-3"},Us=s("p",{class:"Serif-TC mb-1"},"收件人電話：",-1),Rs={class:"Sans-TC"},qs={class:"mb-3"},Gs=s("p",{class:"Serif-TC mb-1"},"收件人地址：",-1),zs={class:"Sans-TC"},Ws={class:"row justify-content-between px-4 mx-lg-5",style:{"padding-top":"4vh"}};function Ys(o,i,p,h,t,a){const v=m("NavBar"),u=m("router-link"),g=m("FrontFooter");return n(),r(f,null,[l(v),s("div",I,[M,s("div",A,[B,s("div",F,[s("div",$,[D,s("div",L,[(n(!0),r(f,null,k(t.order.products,(c,x)=>(n(),r("div",{class:"d-flex mt-4 bg-white",key:x},[s("img",{class:"object-cover",src:c.product.imageUrl,alt:c.product.title,style:{width:"120px",height:"120px"}},null,8,O),s("div",H,[s("p",U,e(c.product.title),1),s("p",R,[q,_(e(o.$filters.currency(c.product.price))+" /"+e(c.product.unit),1)]),s("div",G,[s("p",z," 數量："+e(c.qty),1),s("p",W,"NT$ "+e(o.$filters.currency(c.total)),1)])])]))),128))]),s("div",Y,[s("table",J,[s("tbody",null,[s("tr",null,[K,t.originTotal!==0?(n(),r("td",Q,"NT$ "+e(o.$filters.currency(t.originTotal)),1)):(n(),r("td",X,"NT$ "+e(o.$filters.currency(t.order.total)),1))]),s("tr",null,[Z,t.originTotal===0?(n(),r("td",ss,"-0")):(n(),r("td",ts,e(t.order.total-t.originTotal),1))])])]),s("div",es,[os,s("p",is,"NT$ "+e(o.$filters.currency(t.order.total)),1)])])]),s("div",cs,[ns,s("div",rs,[s("div",as,[s("div",ds,[ls,s("p",_s,e(o.$filters.date(t.order.create_at)),1)]),s("div",ps,[hs,s("p",ms,e(t.order.id),1)]),s("div",us,[fs,t.order.is_paid?(n(),r("p",bs,"付款完成")):(n(),r("p",ys,"尚未付款"))]),s("div",Ts,[vs,s("div",gs,[s("form",xs,[N(s("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":i[0]||(i[0]=c=>t.payMethod=c),style:{"border-radius":"0"}},Ss,512),[[V,t.payMethod]])]),s("div",ws,[s("button",{type:"button",class:"btn btn-sm btn-custom Sans-TC",style:{"padding-left":"1.5rem"},onClick:i[1]||(i[1]=(...c)=>a.payConfirm&&a.payConfirm(...c))},"確認付款")])])]),s("div",Ps,[ks,s("p",Ns,"NT$ "+e(o.$filters.currency(t.order.total)),1)]),s("div",Vs,[js,s("p",Es,e(t.order.message),1)])])]),Is,s("div",Ms,[s("div",As,[s("div",Bs,[Fs,s("p",$s,e(this.user.email),1)]),s("div",Ds,[Ls,s("p",Os,e(this.user.name),1)]),s("div",Hs,[Us,s("p",Rs,e(this.user.tel),1)]),s("div",qs,[Gs,s("p",zs,e(this.user.address),1)])])])])]),s("div",Ws,[l(u,{to:"/products",class:"btn btn-outline-n500 Serif-TC col-6 col-md-auto"},{default:b(()=>[_("繼續購物")]),_:1}),l(u,{to:"/",class:"btn btn-custom Serif-TC col-6 col-md-auto text-decoration-none",style:{"padding-left":"1.5rem"}},{default:b(()=>[_("回到首頁")]),_:1})])])]),l(g)],64)}const Zs=P(E,[["render",Ys]]);export{Zs as default};
