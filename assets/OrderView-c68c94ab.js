import{_ as F,m as B,g as E,r as d,o as n,c as i,b as r,a as e,F as g,i as A,h as _,t as c,bu as v,bk as C,w as y,e as U,d as T,n as f}from"./index-e264cabb.js";import{F as M,c as x}from"./FrontFooter-921f1485.js";import{T as h,S as b}from"./swalToast-9fcbbda7.js";import{N as j}from"./NavBar-2e3e3001.js";const{VITE_APP_URL:V,VITE_APP_PATH:w}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_APP_PATH:"cheryl-hexschool",BASE_URL:"/vite-template/",MODE:"production",DEV:!1,PROD:!0},D={data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""},coupon_code:"couponAll8"}},computed:{...B(x,["getCart","cartNum"])},methods:{...E(x,["getCarts"]),addCouponCode(){if(this.cartNum){const s={code:this.coupon_code};this.$http.post(`${V}api/${w}/coupon`,{data:s}).then(t=>{h.fire({icon:"success",title:"套用優惠券"}),this.getCarts()}).catch(t=>{b.fire({icon:"error",title:t.response.data.message,confirmButtonColor:"#ab7e52"})})}else h.fire({icon:"warning",title:"請先選購產品"})},isPhone(s){return/^(09)[0-9]{8}$/.test(s)?!0:"須為正確的手機號碼 (ex：0912345678)"},createOrder(){const s=this.form;this.$http.post(`${V}api/${w}/order`,{data:s}).then(t=>{h.fire({icon:"success",title:t.data.message}),this.$refs.form.resetForm(),this.form.message="",this.coupon_code="",this.getCarts(),this.linkToPay(t.data.orderId)}).catch(()=>{this.cartNum===0?b.fire({icon:"error",title:"您尚未選購產品",text:"請您將產品加入購物車後，再次送出訂單，謝謝!",confirmButtonColor:"#ab7e52"}):b.fire({icon:"error",title:"客戶資訊漏填",text:"請將客戶資訊填寫完整後，再次送出訂單，謝謝!",confirmButtonColor:"#ab7e52"})})},linkToPay(s){this.$router.push(`/pay/${s}`)}},components:{NavBar:j,FrontFooter:M},mounted(){this.getCarts()}},$={style:{"padding-top":"90px","padding-bottom":"6vh"}},q=e("div",{class:"position-relative d-flex align-items-center justify-content-center",style:{"min-height":"180px"}},[e("div",{class:"position-absolute",style:{top:"0",bottom:"0",left:"0",right:"0","background-image":"url(https://images.unsplash.com/photo-1550450339-e7a4787a2074?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1920&q=80)","background-position":"center center",opacity:"1"}})],-1),H={class:"container"},I={class:"row justify-content-center pt-5 px-4 mx-lg-5"},O={class:"col-md-6 bg-all"},L=e("h2",{class:"text-center Serif-TC my-4"},"訂單內容",-1),R={key:0,class:"pe-2",style:{"max-height":"40vh","overflow-x":"hidden"}},z=["src","alt"],G={class:"w-100 p-3 position-relative Sans-TC"},W={class:"mb-0 fw-bold"},Y={class:"mb-0 mt-1 neutral-500",style:{"font-size":"14px"}},J={key:0,class:"text-success"},K={key:1},Q={class:"d-flex justify-content-between mt-1"},X={class:"mb-0"},Z={class:"mb-0"},ee={key:1,class:"px-3 mt-4 Sans-TC"},te={class:"px-3"},se={class:"table mt-4 neutral-500 Sans-TC"},oe=e("th",{scope:"row",class:"border-0 px-0 font-weight-normal"},"小計",-1),le={class:"text-end border-0 px-0"},re={key:0},ae=e("th",{scope:"row",class:"border-0 px-0 pt-0 font-weight-normal"},"折扣金額",-1),ne={class:"text-end accent-color border-0 px-0 pt-0"},ie={class:"input-group mb-3 input-group-sm ms-auto"},ce={class:"input-group-append"},de={class:"d-flex justify-content-between mt-4 mb-4 Sans-TC"},me=e("p",{class:"mb-0 h4 fw-bold"},"總計",-1),ue={class:"mb-0 h4 fw-bold"},pe={class:"col-12 col-md-6 bg-sec"},fe=e("h2",{class:"text-center Serif-TC my-4"},"客戶資訊",-1),_e={class:"pb-3"},he={class:"mb-3"},be=e("label",{for:"email",class:"form-label Serif-TC"},"Email",-1),ge={class:"mb-3"},ve=e("label",{for:"name",class:"form-label Serif-TC"},"收件人姓名",-1),Ce={class:"mb-3"},ye=e("label",{for:"tel",class:"form-label Serif-TC"},"收件人電話",-1),Te={class:"mb-3"},xe=e("label",{for:"address",class:"form-label Serif-TC"},"收件人地址",-1),Ve={class:"mb-3"},we=e("label",{for:"message",class:"form-label Serif-TC"},"備註",-1),Se={class:"row justify-content-between px-4 mx-lg-5",style:{"padding-top":"4vh"}};function ke(s,t,Ne,Pe,l,m){const S=d("NavBar"),u=d("VField"),p=d("ErrorMessage"),k=d("VForm"),N=d("router-link"),P=d("FrontFooter");return n(),i(g,null,[r(S),e("div",$,[q,e("div",H,[e("div",I,[e("div",O,[L,s.getCart.carts?(n(),i("div",R,[(n(!0),i(g,null,A(s.getCart.carts,o=>(n(),i("div",{class:"d-flex mt-4 bg-white",key:o.id},[e("img",{class:"object-cover",src:o.product.imageUrl,alt:o.product.title,style:{width:"120px",height:"120px"}},null,8,z),e("div",G,[e("p",W,c(o.product.title),1),e("p",Y,[o.product.price!==o.product.origin_price?(n(),i("small",J,"促銷價：")):(n(),i("small",K,"單價：")),T(c(s.$filters.currency(o.product.price))+" /"+c(o.product.unit),1)]),e("div",Q,[e("p",X," 數量："+c(o.qty),1),e("p",Z,"NT$ "+c(s.$filters.currency(o.total)),1)])])]))),128))])):_("",!0),s.cartNum?_("",!0):(n(),i("div",ee," 您目前尚未選購產品 ")),e("div",te,[e("table",se,[e("tbody",null,[e("tr",null,[oe,e("td",le,"NT$ "+c(s.$filters.currency(s.getCart.total)),1)]),s.getCart.total!==s.getCart.final_total?(n(),i("tr",re,[ae,e("td",ne,"-"+c(s.$filters.currency(s.getCart.total-s.getCart.final_total)),1)])):_("",!0)])]),e("div",ie,[v(e("input",{type:"text",class:"form-control Sans-TC","onUpdate:modelValue":t[0]||(t[0]=o=>l.coupon_code=o),placeholder:"請輸入優惠碼",style:{"border-top-left-radius":"0","border-bottom-left-radius":"0"}},null,512),[[C,l.coupon_code]]),e("div",ce,[e("button",{type:"button",style:{"padding-left":"1.5rem"},class:"btn btn-custom Serif-TC",onClick:t[1]||(t[1]=(...o)=>m.addCouponCode&&m.addCouponCode(...o))}," 套用優惠碼 ")])]),e("div",de,[me,e("p",ue,"NT$ "+c(s.$filters.currency(s.getCart.final_total)),1)])])]),e("div",pe,[fe,e("div",_e,[r(k,{ref:"form",class:"px-3 m-auto"},{default:y(({errors:o})=>[e("div",he,[be,r(u,{id:"email",name:"email",type:"email",class:f(["form-control Sans-TC",{"is-invalid":o.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:l.form.user.email,"onUpdate:modelValue":t[2]||(t[2]=a=>l.form.user.email=a)},null,8,["class","modelValue"]),r(p,{name:"email",class:"invalid-feedback"})]),e("div",ge,[ve,r(u,{id:"name",name:"姓名",type:"text",class:f(["form-control Sans-TC",{"is-invalid":o.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:l.form.user.name,"onUpdate:modelValue":t[3]||(t[3]=a=>l.form.user.name=a)},null,8,["class","modelValue"]),r(p,{name:"姓名",class:"invalid-feedback"})]),e("div",Ce,[ye,r(u,{id:"tel",name:"電話",type:"tel",class:f(["form-control Sans-TC",{"is-invalid":o.電話}]),placeholder:"請輸入手機號碼",rules:m.isPhone,modelValue:l.form.user.tel,"onUpdate:modelValue":t[4]||(t[4]=a=>l.form.user.tel=a)},null,8,["class","rules","modelValue"]),r(p,{name:"電話",class:"invalid-feedback"})]),e("div",Te,[xe,r(u,{id:"address",name:"地址",type:"text",class:f(["form-control Sans-TC",{"is-invalid":o.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:l.form.user.address,"onUpdate:modelValue":t[5]||(t[5]=a=>l.form.user.address=a)},null,8,["class","modelValue"]),r(p,{name:"地址",class:"invalid-feedback"})]),e("div",Ve,[we,v(e("textarea",{id:"message",class:"form-control Sans-TC",cols:"30",rows:"5","onUpdate:modelValue":t[6]||(t[6]=a=>l.form.message=a)},null,512),[[C,l.form.message]])])]),_:1},512)])])]),e("div",Se,[r(N,{to:"/cart",class:"btn btn-outline-n500 Serif-TC col-6 col-md-auto"},{default:y(()=>[T("回到購物車")]),_:1}),e("button",{type:"button",onClick:t[7]||(t[7]=U(()=>m.createOrder(),["prevent"])),class:"btn btn-custom Serif-TC col-6 col-md-auto",style:{"padding-left":"1.5rem"}},"送出訂單")])])]),r(P)],64)}const Ue=F(D,[["render",ke]]);export{Ue as default};
