import{S as h,T as C}from"./swalToast-e750b2aa.js";import{N as S}from"./NavBar-94e677f2.js";import{F as w}from"./FrontFooter-a161c630.js";import{_ as P,r as f,o as n,c as r,b as d,a as t,w as p,F as b,i as k,t as e,bu as N,bj as j,d as a,j as B}from"./index-eb2a4001.js";const{VITE_APP_URL:y,VITE_APP_PATH:T}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_APP_PATH:"cheryl-hexschool",BASE_URL:"/vite-template/",MODE:"production",DEV:!1,PROD:!0},V={data(){return{order:{},orderId:"",user:{},payProducts:[],originTotal:0,payMethod:"請選擇"}},methods:{getOrder(){const{orderId:o}=this.$route.params;this.$http.get(`${y}api/${T}/order/${o}`).then(i=>{var u,s;this.order=i.data.order,this.orderId=i.data.order.id,this.user=i.data.order.user;const m=i.data.order.products;if(this.payProducts=Object.keys(m).map(function(l){return m[l]}),((s=(u=this.payProducts[0])==null?void 0:u.coupon)==null?void 0:s.percent)!==void 0){const l=this.payProducts[0].coupon.percent;this.originTotal=parseInt(this.order.total/l*100)}}).catch(i=>{h.fire({icon:"error",title:i.response.data.message,confirmButtonColor:"#ab7e52"})})},payConfirm(){this.order.is_paid?h.fire({icon:"warning",title:"您已付款完成",confirmButtonColor:"#ab7e52"}):this.payMethod!=="請選擇"?this.$http.post(`${y}api/${T}/pay/${this.orderId}`).then(o=>{C.fire({icon:"success",title:o.data.message}),this.getOrder()}).catch(o=>{h.fire({icon:"error",title:o.response.data.message,confirmButtonColor:"#ab7e52"})}):h.fire({icon:"warning",title:"請先選擇付款方式",confirmButtonColor:"#ab7e52"})}},components:{NavBar:S,FrontFooter:w},mounted(){this.getOrder()}},E={class:"",style:{"padding-top":"90px","padding-bottom":"6vh"}},I=t("div",{class:"position-relative d-flex align-items-center justify-content-center",style:{"min-height":"180px"}},[t("div",{class:"position-absolute",style:{top:"0",bottom:"0",left:"0",right:"0","background-image":"url(https://images.unsplash.com/photo-1550450339-e7a4787a2074?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1920&q=80)","background-position":"center center",opacity:"1"}})],-1),M={key:0,class:"container",style:{height:"52vh"}},A={class:"row justify-content-center px-4 mx-lg-5"},F=t("h1",{class:"text-center Serif-TC letter-spacing m-0 py-5 neutral-900"},[t("i",{class:"bi bi-check2-circle text-success"}),a(" 已付款成功")],-1),D=t("p",{class:"text-center Sans-TC fs-3 neutral-700"},"感謝您的訂購！非常感激您對我們產品的信任和支持。",-1),$=t("p",{class:"text-center Sans-TC fs-3 neutral-700"},"您的滿意是我們最大的追求，期待為您提供更優質的服務。",-1),L={class:"row col-md-6 justify-content-between",style:{"padding-top":"4vh"}},O={key:1,class:"container"},H=t("div",{class:"row justify-content-between px-4 pt-5 mx-lg-5"},[t("h1",{class:"text-center Serif-TC letter-spacing m-0"},[t("i",{class:"bi bi-check2-circle text-success"}),a(" 訂單已成立")])],-1),U={class:"row justify-content-center pt-5 px-4 mx-lg-5"},R={class:"col-md-6 bg-all"},q=t("h2",{class:"text-center Serif-TC my-4"},"訂單明細",-1),G={class:"pe-2",style:{"max-height":"60vh","overflow-x":"hidden"}},z=["src","alt"],W={class:"w-100 p-3 position-relative Sans-TC"},Y={class:"mb-0 fw-bold"},J={class:"mb-0 mt-1 neutral-500",style:{"font-size":"14px"}},K=t("small",null,"售價：",-1),Q={class:"d-flex justify-content-between mt-1"},X={class:"mb-0"},Z={class:"mb-0"},tt={class:"px-3"},st={class:"table mt-4 neutral-500 Sans-TC"},et=t("th",{scope:"row",class:"border-0 px-0 font-weight-normal"},"小計",-1),ot={key:0,class:"text-end border-0 px-0"},it={key:1,class:"text-end border-0 px-0"},ct=t("th",{scope:"row",class:"border-0 px-0 pt-0 font-weight-normal"},"折扣金額",-1),nt={key:0,class:"text-end accent-color border-0 px-0 pt-0"},rt={key:1,class:"text-end accent-color border-0 px-0 pt-0"},at={class:"d-flex justify-content-between mt-4 mb-4 Sans-TC"},lt=t("p",{class:"mb-0 h4 fw-bold"},"總計",-1),dt={class:"mb-0 h4 fw-bold"},_t={class:"col-12 col-md-6 bg-sec"},ht=t("h2",{class:"text-center Serif-TC my-4"},"訂單資訊",-1),pt={class:"pb-3"},mt={class:"px-3 m-auto"},ut={class:"mb-3"},ft=t("p",{class:"Serif-TC mb-1"},"訂單日期：",-1),bt={class:"Sans-TC"},yt={class:"mb-3"},Tt=t("p",{class:"Serif-TC mb-1"},"訂單編號：",-1),vt={class:"Sans-TC"},xt={class:"mb-3"},gt=t("p",{class:"Serif-TC mb-1"},"付款狀態：",-1),Ct={key:0,class:"Sans-TC text-success fs-5 m-0"},St={key:1,class:"Sans-TC accent-color fs-5 m-0"},wt={class:"mb-3"},Pt=t("p",{class:"Serif-TC mb-1"},"付款方式：",-1),kt={class:"row"},Nt={class:"col col-lg-5"},jt=B('<option selected disabled>請選擇</option><option value="貨到付款">貨到付款</option><option value="銀行轉帳/ATM">銀行轉帳/ATM</option><option value="信用卡">信用卡</option><option value="LINE_Pay">LINE Pay</option>',5),Bt=[jt],Vt={class:"col-auto"},Et={class:"mb-3"},It=t("p",{class:"Serif-TC mb-1"},"訂單金額：",-1),Mt={class:"Sans-TC"},At={class:"mb-3"},Ft=t("p",{class:"Serif-TC mb-1"},"訂單備註：",-1),Dt={class:"Sans-TC"},$t=t("h2",{class:"text-center Serif-TC my-4"},"客戶資訊",-1),Lt={class:"pb-3"},Ot={class:"px-3 m-auto"},Ht={class:"mb-3"},Ut=t("p",{class:"Serif-TC mb-1"},"Email：",-1),Rt={class:"Sans-TC"},qt={class:"mb-3"},Gt=t("p",{class:"Serif-TC mb-1"},"收件人姓名：",-1),zt={class:"Sans-TC"},Wt={class:"mb-3"},Yt=t("p",{class:"Serif-TC mb-1"},"收件人電話：",-1),Jt={class:"Sans-TC"},Kt={class:"mb-3"},Qt=t("p",{class:"Serif-TC mb-1"},"收件人地址：",-1),Xt={class:"Sans-TC"},Zt={class:"row justify-content-between px-4 mx-lg-5",style:{"padding-top":"4vh"}};function ts(o,i,m,u,s,l){const v=f("NavBar"),_=f("router-link"),x=f("FrontFooter");return n(),r(b,null,[d(v),t("div",E,[I,s.order.is_paid?(n(),r("div",M,[t("div",A,[F,D,$,t("div",L,[d(_,{to:"/products",class:"btn btn-outline-n500 Serif-TC col-6 col-md-auto"},{default:p(()=>[a("繼續購物")]),_:1}),d(_,{to:"/",class:"btn btn-custom Serif-TC col-6 col-md-auto text-decoration-none",style:{"padding-left":"1.5rem"}},{default:p(()=>[a("回到首頁")]),_:1})])])])):(n(),r("div",O,[H,t("div",U,[t("div",R,[q,t("div",G,[(n(!0),r(b,null,k(s.order.products,(c,g)=>(n(),r("div",{class:"d-flex mt-4 bg-white",key:g},[t("img",{class:"object-cover",src:c.product.imageUrl,alt:c.product.title,style:{width:"120px",height:"120px"}},null,8,z),t("div",W,[t("p",Y,e(c.product.title),1),t("p",J,[K,a(e(o.$filters.currency(c.product.price))+" /"+e(c.product.unit),1)]),t("div",Q,[t("p",X," 數量："+e(c.qty),1),t("p",Z,"NT$ "+e(o.$filters.currency(c.total)),1)])])]))),128))]),t("div",tt,[t("table",st,[t("tbody",null,[t("tr",null,[et,s.originTotal!==0?(n(),r("td",ot,"NT$ "+e(o.$filters.currency(s.originTotal)),1)):(n(),r("td",it,"NT$ "+e(o.$filters.currency(s.order.total)),1))]),t("tr",null,[ct,s.originTotal===0?(n(),r("td",nt,"-0")):(n(),r("td",rt,e(s.order.total-s.originTotal),1))])])]),t("div",at,[lt,t("p",dt,"NT$ "+e(o.$filters.currency(s.order.total)),1)])])]),t("div",_t,[ht,t("div",pt,[t("div",mt,[t("div",ut,[ft,t("p",bt,e(o.$filters.date(s.order.create_at)),1)]),t("div",yt,[Tt,t("p",vt,e(s.order.id),1)]),t("div",xt,[gt,s.order.is_paid?(n(),r("p",Ct,"付款完成")):(n(),r("p",St,"尚未付款"))]),t("div",wt,[Pt,t("div",kt,[t("form",Nt,[N(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":i[0]||(i[0]=c=>s.payMethod=c),style:{"border-radius":"0"}},Bt,512),[[j,s.payMethod]])]),t("div",Vt,[t("button",{type:"button",class:"btn btn-sm btn-custom Sans-TC",style:{"padding-left":"1.5rem"},onClick:i[1]||(i[1]=(...c)=>l.payConfirm&&l.payConfirm(...c))},"確認付款")])])]),t("div",Et,[It,t("p",Mt,"NT$ "+e(o.$filters.currency(s.order.total)),1)]),t("div",At,[Ft,t("p",Dt,e(s.order.message),1)])])]),$t,t("div",Lt,[t("div",Ot,[t("div",Ht,[Ut,t("p",Rt,e(this.user.email),1)]),t("div",qt,[Gt,t("p",zt,e(this.user.name),1)]),t("div",Wt,[Yt,t("p",Jt,e(this.user.tel),1)]),t("div",Kt,[Qt,t("p",Xt,e(this.user.address),1)])])])])]),t("div",Zt,[d(_,{to:"/products",class:"btn btn-outline-n500 Serif-TC col-6 col-md-auto"},{default:p(()=>[a("繼續購物")]),_:1}),d(_,{to:"/",class:"btn btn-custom Serif-TC col-6 col-md-auto text-decoration-none",style:{"padding-left":"1.5rem"}},{default:p(()=>[a("回到首頁")]),_:1})])]))]),d(x)],64)}const cs=P(V,[["render",ts]]);export{cs as default};
