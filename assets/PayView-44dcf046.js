import{S as p,T as w}from"./swalToast-7deca462.js";import{N as P}from"./NavBar-5d474c55.js";import{F as k}from"./FrontFooter-8cbb5d79.js";import{_ as N,r as f,o as i,c,b as d,a as t,d as a,t as e,w as h,F as y,i as j,h as b,bu as B,bj as V,j as g}from"./index-753928c9.js";const{VITE_APP_URL:T,VITE_APP_PATH:v}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_APP_PATH:"cheryl-hexschool",BASE_URL:"/vite-template/",MODE:"production",DEV:!1,PROD:!0},E={data(){return{order:{},orderId:"",user:{},payProducts:[],originTotal:0,payMethod:"請選擇"}},methods:{getOrder(){const{orderId:o}=this.$route.params;this.$http.get(`${T}api/${v}/order/${o}`).then(n=>{var u,s;this.order=n.data.order,this.orderId=n.data.order.id,this.user=n.data.order.user;const m=n.data.order.products;if(this.payProducts=Object.keys(m).map(function(l){return m[l]}),((s=(u=this.payProducts[0])==null?void 0:u.coupon)==null?void 0:s.percent)!==void 0){const l=this.payProducts[0].coupon.percent;this.originTotal=parseInt(this.order.total/l*100)}}).catch(n=>{p.fire({icon:"error",title:n.response.data.message,confirmButtonColor:"#ab7e52"})})},payConfirm(){this.order.is_paid?p.fire({icon:"warning",title:"您已付款完成",confirmButtonColor:"#ab7e52"}):this.payMethod!=="請選擇"?this.$http.post(`${T}api/${v}/pay/${this.orderId}`).then(o=>{w.fire({icon:"success",title:o.data.message}),this.getOrder()}).catch(o=>{p.fire({icon:"error",title:o.response.data.message,confirmButtonColor:"#ab7e52"})}):p.fire({icon:"warning",title:"請先選擇付款方式",confirmButtonColor:"#ab7e52"})}},components:{NavBar:P,FrontFooter:k},mounted(){this.getOrder()}},I={class:"",style:{"padding-top":"90px","padding-bottom":"6vh","min-height":"95vh"}},M=t("div",{class:"position-relative d-flex align-items-center justify-content-center",style:{"min-height":"180px"}},[t("div",{class:"position-absolute",style:{top:"0",bottom:"0",left:"0",right:"0","background-image":"url(https://images.unsplash.com/photo-1550450339-e7a4787a2074?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1920&q=80)","background-position":"center center",opacity:"1"}})],-1),A={key:0,class:"container",style:{height:"52vh"}},F={class:"row justify-content-center px-4 mx-lg-5 mt-lg-5"},D=t("h1",{class:"text-center Serif-TC letter-spacing m-0 py-5 neutral-900"},[t("i",{class:"bi bi-check2-circle text-success"}),a(" 付款成功，訂單已成立!")],-1),L={class:"text-center Sans-TC fs-3 neutral-700"},O={class:"accent-color"},H=t("p",{class:"text-center Sans-TC fs-3 neutral-700"},[t("i",{class:"bi bi-stars pe-2"}),a("感謝您的訂購！非常感激您對我們產品的信任和支持。")],-1),U=t("p",{class:"text-center Sans-TC fs-3 neutral-700"},"您的滿意是我們最大的追求，期待為您提供更優質的服務。",-1),R={class:"row col-md-6 justify-content-between",style:{"padding-top":"4vh"}},$={key:1,class:"container"},q=g('<div class="row justify-content-between px-4 pt-5 mx-lg-5"><h1 class="text-center Serif-TC letter-spacing m-0 accent-color"><i class="bi bi-exclamation-circle"></i> 提醒您!訂單尚未完成</h1><p class="text-center Sans-TC letter-spacing m-0 pt-3 fs-4">請於下方選譯付款方式後，按下<span class="text-primary fw-bolder">確認付款</span>，即可完成訂購!</p></div>',1),G={class:"row justify-content-center pt-5 px-4 mx-lg-5"},z={class:"col-md-6 bg-all"},W=t("h2",{class:"text-center Serif-TC my-4"},"訂單明細",-1),Y={class:"pe-2",style:{"max-height":"84vh","overflow-x":"hidden"}},J=["src","alt"],K={class:"w-100 p-3 position-relative Sans-TC"},Q={class:"mb-0 fw-bold"},X={class:"mb-0 mt-1 neutral-500",style:{"font-size":"14px"}},Z=t("small",null,"售價：",-1),tt={class:"d-flex justify-content-between mt-1"},st={class:"mb-0"},et={class:"mb-0"},ot={class:"px-3"},it={class:"table mt-4 neutral-500 Sans-TC"},ct=t("th",{scope:"row",class:"border-0 px-0 font-weight-normal"},"小計",-1),nt={key:0,class:"text-end border-0 px-0"},rt={key:1,class:"text-end border-0 px-0"},at={key:0},lt=t("th",{scope:"row",class:"border-0 px-0 pt-0 font-weight-normal"},"折扣金額",-1),dt={class:"text-end accent-color border-0 px-0 pt-0"},_t={class:"d-flex justify-content-between mt-4 mb-4 Sans-TC"},pt=t("p",{class:"mb-0 h4 fw-bold"},"總計",-1),ht={class:"mb-0 h4 fw-bold"},mt={class:"col-12 col-md-6 bg-sec"},ut=t("h2",{class:"text-center Serif-TC my-4"},"客戶資訊",-1),ft={class:"pb-3"},bt={class:"px-3 m-auto"},yt={class:"mb-3"},Tt=t("p",{class:"Serif-TC mb-1"},"Email：",-1),vt={class:"Sans-TC"},gt={class:"mb-3"},xt=t("p",{class:"Serif-TC mb-1"},"收件人姓名：",-1),Ct={class:"Sans-TC"},St={class:"mb-3"},wt=t("p",{class:"Serif-TC mb-1"},"收件人電話：",-1),Pt={class:"Sans-TC"},kt={class:"mb-3"},Nt=t("p",{class:"Serif-TC mb-1"},"收件人地址：",-1),jt={class:"Sans-TC"},Bt=t("h2",{class:"text-center Serif-TC my-4"},"訂單資訊",-1),Vt={class:"pb-3"},Et={class:"px-3 m-auto"},It={class:"mb-3"},Mt=t("p",{class:"Serif-TC mb-1"},"訂單日期：",-1),At={class:"Sans-TC"},Ft={class:"mb-3"},Dt=t("p",{class:"Serif-TC mb-1"},"訂單編號：",-1),Lt={class:"Sans-TC"},Ot={class:"mb-3"},Ht=t("p",{class:"Serif-TC mb-1"},"訂單金額：",-1),Ut={class:"Sans-TC"},Rt={class:"mb-3"},$t=t("p",{class:"Serif-TC mb-1"},"付款狀態：",-1),qt={key:0,class:"Sans-TC text-success fs-5 m-0"},Gt={key:1,class:"Sans-TC accent-color fs-5 m-0"},zt={class:"mb-3"},Wt=t("p",{class:"Serif-TC mb-1"},"付款方式：",-1),Yt={class:"col col-12"},Jt=g('<option selected disabled>請選擇</option><option value="貨到付款">貨到付款</option><option value="銀行轉帳/ATM">銀行轉帳/ATM</option><option value="信用卡">信用卡</option><option value="LINE_Pay">LINE Pay</option>',5),Kt=[Jt],Qt={key:0,class:"mb-3"},Xt=t("p",{class:"Serif-TC mb-1"},"訂單備註：",-1),Zt={class:"Sans-TC"},ts={class:"mb-3"},ss={key:0,class:"row justify-content-between px-4 mx-lg-5",style:{"padding-top":"4vh"}};function es(o,n,m,u,s,l){const x=f("NavBar"),_=f("router-link"),C=f("FrontFooter");return i(),c(y,null,[d(x),t("div",I,[M,s.order.is_paid?(i(),c("div",A,[t("div",F,[D,t("p",L,[a("訂單編號："),t("span",O,e(s.order.id),1)]),H,U,t("div",R,[d(_,{to:"/products",class:"btn btn-outline-n500 Serif-TC col-6 col-md-auto"},{default:h(()=>[a("繼續購物")]),_:1}),d(_,{to:"/",class:"btn btn-custom Serif-TC col-6 col-md-auto text-decoration-none",style:{"padding-left":"1.5rem"}},{default:h(()=>[a("回到首頁")]),_:1})])])])):(i(),c("div",$,[q,t("div",G,[t("div",z,[W,t("div",Y,[(i(!0),c(y,null,j(s.order.products,(r,S)=>(i(),c("div",{class:"d-flex mt-4 bg-white",key:S},[t("img",{class:"object-cover",src:r.product.imageUrl,alt:r.product.title,style:{width:"120px",height:"120px"}},null,8,J),t("div",K,[t("p",Q,e(r.product.title),1),t("p",X,[Z,a(e(o.$filters.currency(r.product.price))+" /"+e(r.product.unit),1)]),t("div",tt,[t("p",st," 數量："+e(r.qty),1),t("p",et,"NT$ "+e(o.$filters.currency(r.total)),1)])])]))),128))]),t("div",ot,[t("table",it,[t("tbody",null,[t("tr",null,[ct,s.originTotal!==0?(i(),c("td",nt,"NT$ "+e(o.$filters.currency(s.originTotal)),1)):(i(),c("td",rt,"NT$ "+e(o.$filters.currency(s.order.total)),1))]),s.originTotal!==0?(i(),c("tr",at,[lt,t("td",dt,e(s.order.total-s.originTotal),1)])):b("",!0)])]),t("div",_t,[pt,t("p",ht,"NT$ "+e(o.$filters.currency(s.order.total)),1)])])]),t("div",mt,[ut,t("div",ft,[t("div",bt,[t("div",yt,[Tt,t("p",vt,e(this.user.email),1)]),t("div",gt,[xt,t("p",Ct,e(this.user.name),1)]),t("div",St,[wt,t("p",Pt,e(this.user.tel),1)]),t("div",kt,[Nt,t("p",jt,e(this.user.address),1)])])]),Bt,t("div",Vt,[t("div",Et,[t("div",It,[Mt,t("p",At,e(o.$filters.date(s.order.create_at)),1)]),t("div",Ft,[Dt,t("p",Lt,e(s.order.id),1)]),t("div",Ot,[Ht,t("p",Ut,"NT$ "+e(o.$filters.currency(s.order.total)),1)]),t("div",Rt,[$t,s.order.is_paid?(i(),c("p",qt,"付款完成")):(i(),c("p",Gt,"尚未付款"))]),t("div",zt,[Wt,t("form",Yt,[B(t("select",{name:"",id:"",class:"form-select Sans-TC","onUpdate:modelValue":n[0]||(n[0]=r=>s.payMethod=r),style:{"border-radius":"0"}},Kt,512),[[V,s.payMethod]])])]),s.order.message?(i(),c("div",Qt,[Xt,t("p",Zt,e(s.order.message),1)])):b("",!0),t("div",ts,[t("button",{type:"button",class:"btn btn-custom Sans-TC w-100",style:{"padding-left":"1.5rem"},onClick:n[1]||(n[1]=(...r)=>l.payConfirm&&l.payConfirm(...r))},"確認付款")])])])])]),s.order.is_paid?(i(),c("div",ss,[d(_,{to:"/products",class:"btn btn-outline-n500 Serif-TC col-6 col-md-auto"},{default:h(()=>[a("繼續購物")]),_:1}),d(_,{to:"/",class:"btn btn-custom Serif-TC col-6 col-md-auto text-decoration-none",style:{"padding-left":"1.5rem"}},{default:h(()=>[a("回到首頁")]),_:1})])):b("",!0)]))]),d(C)],64)}const rs=N(E,[["render",es]]);export{rs as default};
