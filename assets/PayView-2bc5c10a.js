import{S as d,T as C}from"./swalToast-5cecdf36.js";import{N as S}from"./NavBar-9de95bba.js";import{F as w}from"./FrontFooter-2d737a34.js";import{_ as P,r as m,o as c,c as n,b as l,a as t,F as b,i as k,t as o,bu as N,bj as V,w as f,d as _,j}from"./index-c50289c1.js";const{VITE_APP_URL:T,VITE_APP_PATH:v}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_APP_PATH:"cheryl-hexschool",BASE_URL:"/vite-template/",MODE:"production",DEV:!1,PROD:!0},E={data(){return{order:{},orderId:"",user:{},payProducts:[],originTotal:0,payMethod:"請選擇"}},methods:{getOrder(){const{orderId:r}=this.$route.params;this.$http.get(`${T}api/${v}/order/${r}`).then(e=>{var h,s;this.order=e.data.order,this.orderId=e.data.order.id,this.user=e.data.order.user;const p=e.data.order.products;if(this.payProducts=Object.keys(p).map(function(a){return p[a]}),((s=(h=this.payProducts[0])==null?void 0:h.coupon)==null?void 0:s.percent)!==void 0){const a=this.payProducts[0].coupon.percent;this.originTotal=parseInt(this.order.total/a*100)}}).catch(e=>{d.fire({icon:"error",title:e.response.data.message})})},payConfirm(){this.order.is_paid?d.fire({icon:"warning",title:"您已付款完成"}):this.payMethod!=="請選擇"?this.$http.post(`${T}api/${v}/pay/${this.orderId}`).then(r=>{C.fire({icon:"success",title:r.data.message}),this.getOrder()}).catch(r=>{d.fire({icon:"error",title:r.response.data.message})}):d.fire({icon:"warning",title:"請先選擇付款方式"})}},components:{NavBar:S,FrontFooter:w},mounted(){this.getOrder()}},I={class:"",style:{"padding-top":"90px","padding-bottom":"6vh"}},M=t("div",{class:"position-relative d-flex align-items-center justify-content-center",style:{"min-height":"180px"}},[t("div",{class:"position-absolute",style:{top:"0",bottom:"0",left:"0",right:"0","background-image":"url(https://images.unsplash.com/photo-1550450339-e7a4787a2074?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1920&q=80)","background-position":"center center",opacity:"1"}})],-1),A={class:"container"},B=t("div",{class:"row justify-content-between px-4 pt-5 mx-lg-5"},[t("h1",{class:"text-center Serif-TC letter-spacing m-0"},[t("i",{class:"bi bi-check2-circle text-success"}),_(" 訂單已成立")])],-1),F={class:"row justify-content-center pt-5 px-4 mx-lg-5"},D={class:"col-md-6 bg-all"},L=t("h2",{class:"text-center Serif-TC my-4"},"訂單明細",-1),O={class:"pe-2",style:{"max-height":"60vh","overflow-x":"hidden"}},H=["src","alt"],U={class:"w-100 p-3 position-relative Sans-TC"},R={class:"mb-0 fw-bold"},q={class:"mb-0 mt-1 neutral-500",style:{"font-size":"14px"}},G=t("small",null,"售價：",-1),$={class:"d-flex justify-content-between mt-1"},z={class:"mb-0"},W={class:"mb-0"},Y={class:"px-3"},J={class:"table mt-4 neutral-500 Sans-TC"},K=t("th",{scope:"row",class:"border-0 px-0 font-weight-normal"},"小計",-1),Q={key:0,class:"text-end border-0 px-0"},X={key:1,class:"text-end border-0 px-0"},Z=t("th",{scope:"row",class:"border-0 px-0 pt-0 font-weight-normal"},"折扣金額",-1),tt={key:0,class:"text-end accent-color border-0 px-0 pt-0"},st={key:1,class:"text-end accent-color border-0 px-0 pt-0"},ot={class:"d-flex justify-content-between mt-4 mb-4 Sans-TC"},et=t("p",{class:"mb-0 h4 fw-bold"},"總計",-1),it={class:"mb-0 h4 fw-bold"},ct={class:"col-12 col-md-6 bg-sec"},nt=t("h2",{class:"text-center Serif-TC my-4"},"訂單資訊",-1),rt={class:"pb-3"},at={class:"px-3 m-auto"},dt={class:"mb-3"},lt=t("p",{class:"Serif-TC mb-1"},"訂單日期：",-1),_t={class:"Sans-TC"},pt={class:"mb-3"},ht=t("p",{class:"Serif-TC mb-1"},"訂單編號：",-1),mt={class:"Sans-TC"},ut={class:"mb-3"},bt=t("p",{class:"Serif-TC mb-1"},"付款狀態：",-1),ft={key:0,class:"Sans-TC text-success fs-5 m-0"},Tt={key:1,class:"Sans-TC accent-color fs-5 m-0"},vt={class:"mb-3"},xt=t("p",{class:"Serif-TC mb-1"},"付款方式：",-1),yt={class:"row"},gt={class:"col col-lg-5"},Ct=j('<option selected disabled>請選擇</option><option value="貨到付款">貨到付款</option><option value="銀行轉帳/ATM">銀行轉帳/ATM</option><option value="信用卡">信用卡</option><option value="LINE_Pay">LINE Pay</option>',5),St=[Ct],wt={class:"col-auto"},Pt={class:"mb-3"},kt=t("p",{class:"Serif-TC mb-1"},"訂單金額：",-1),Nt={class:"Sans-TC"},Vt={class:"mb-3"},jt=t("p",{class:"Serif-TC mb-1"},"訂單備註：",-1),Et={class:"Sans-TC"},It=t("h2",{class:"text-center Serif-TC my-4"},"客戶資訊",-1),Mt={class:"pb-3"},At={class:"px-3 m-auto"},Bt={class:"mb-3"},Ft=t("p",{class:"Serif-TC mb-1"},"Email：",-1),Dt={class:"Sans-TC"},Lt={class:"mb-3"},Ot=t("p",{class:"Serif-TC mb-1"},"收件人姓名：",-1),Ht={class:"Sans-TC"},Ut={class:"mb-3"},Rt=t("p",{class:"Serif-TC mb-1"},"收件人電話：",-1),qt={class:"Sans-TC"},Gt={class:"mb-3"},$t=t("p",{class:"Serif-TC mb-1"},"收件人地址：",-1),zt={class:"Sans-TC"},Wt={class:"row justify-content-between px-4 mx-lg-5",style:{"padding-top":"4vh"}};function Yt(r,e,p,h,s,a){const x=m("NavBar"),u=m("router-link"),y=m("FrontFooter");return c(),n(b,null,[l(x),t("div",I,[M,t("div",A,[B,t("div",F,[t("div",D,[L,t("div",O,[(c(!0),n(b,null,k(s.order.products,(i,g)=>(c(),n("div",{class:"d-flex mt-4 bg-white",key:g},[t("img",{class:"object-cover",src:i.product.imageUrl,alt:i.product.title,style:{width:"120px",height:"120px"}},null,8,H),t("div",U,[t("p",R,o(i.product.title),1),t("p",q,[G,_(o(i.product.price)+" /"+o(i.product.unit),1)]),t("div",$,[t("p",z," 數量："+o(i.qty),1),t("p",W,"NT$ "+o(i.total),1)])])]))),128))]),t("div",Y,[t("table",J,[t("tbody",null,[t("tr",null,[K,s.originTotal!==0?(c(),n("td",Q,"NT$ "+o(s.originTotal),1)):(c(),n("td",X,"NT$ "+o(s.order.total),1))]),t("tr",null,[Z,s.originTotal===0?(c(),n("td",tt,"-0")):(c(),n("td",st,o(s.order.total-s.originTotal),1))])])]),t("div",ot,[et,t("p",it,"NT$ "+o(s.order.total),1)])])]),t("div",ct,[nt,t("div",rt,[t("div",at,[t("div",dt,[lt,t("p",_t,o(r.$filters.date(s.order.create_at)),1)]),t("div",pt,[ht,t("p",mt,o(s.order.id),1)]),t("div",ut,[bt,s.order.is_paid?(c(),n("p",ft,"付款完成")):(c(),n("p",Tt,"尚未付款"))]),t("div",vt,[xt,t("div",yt,[t("form",gt,[N(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":e[0]||(e[0]=i=>s.payMethod=i),style:{"border-radius":"0"}},St,512),[[V,s.payMethod]])]),t("div",wt,[t("button",{type:"button",class:"btn btn-sm btn-custom Sans-TC",style:{"padding-left":"1.5rem"},onClick:e[1]||(e[1]=(...i)=>a.payConfirm&&a.payConfirm(...i))},"確認付款")])])]),t("div",Pt,[kt,t("p",Nt,"NT$ "+o(s.order.total),1)]),t("div",Vt,[jt,t("p",Et,o(s.order.message),1)])])]),It,t("div",Mt,[t("div",At,[t("div",Bt,[Ft,t("p",Dt,o(this.user.email),1)]),t("div",Lt,[Ot,t("p",Ht,o(this.user.name),1)]),t("div",Ut,[Rt,t("p",qt,o(this.user.tel),1)]),t("div",Gt,[$t,t("p",zt,o(this.user.address),1)])])])])]),t("div",Wt,[l(u,{to:"/products",class:"btn btn-outline-n500 Serif-TC col-6 col-md-auto"},{default:f(()=>[_("繼續購物")]),_:1}),l(u,{to:"/",class:"btn btn-custom Serif-TC col-6 col-md-auto text-decoration-none",style:{"padding-left":"1.5rem"}},{default:f(()=>[_("回到首頁")]),_:1})])])]),l(y)],64)}const Zt=P(E,[["render",Yt]]);export{Zt as default};
